
FROM ubuntu:14.04

MAINTAINER Claire Rioualen

RUN apt-get update

ENV SOURCE_DIR=~/app_sources/

RUN cd ${SOURCE_DIR}; \
RUN wget --no-clobber http://downloads.sourceforge.net/project/bowtie-bio/bowtie/1.1.1/bowtie-1.1.1-linux-x86_64.zip;\
RUN unzip bowtie-1.1.1-linux-x86_64.zip;\
RUN cp `find bowtie-$(BOWTIE1_VER)/ -maxdepth 1 -executable -type f` $(BIN_DIR)



RUN apt-get install --yes build-essential gcc-multilib apt-utils zlib1g-dev git
# Install STAR
WORKDIR /tmp
RUN git clone https://github.com/BenLangmead/bowtie.git
WORKDIR /tmp/bowtie
RUN git checkout v1.1.1
# Patch Makefile
RUN sed -i 's/ifneq (,$(findstring 13,$(shell uname -r)))/ifneq (,$(findstring Darwin 13,$(shell uname -sr)))/' Makefile
RUN sed -i 's/EXTRA_CFLAGS =/EXTRA_CFLAGS = -static/' Makefile
RUN sed -i 's/EXTRA_CXXFLAGS =/EXTRA_CXXFLAGS = -static/' Makefile
# Compile
RUN make
RUN cp -p bowtie bowtie-* /usr/local/bin
# Cleanup
RUN rm -rf /tmp/bowtie
RUN apt-get clean
RUN apt-get remove --yes --purge build-essential gcc-multilib apt-utils zlib1g-dev vim git
WORKDIR /roothttps://sourceforge.net/projects/bowtie-bio/files/bowtie/1.1.2/

FROM phusion/baseimage MAINTAINER Alejandro Barrera <alejandro.barrera@duke.edu> # Install dependencies RUN apt-get update && apt-get install -y \
  curl \
  unzip
# Installs bowtie from compiled distribution into /opt/bowtie ENV BOWTIE_URL=http://sourceforge.net/projects/bowtie-bio/files/bowtie ENV BOWTIE_RELEASE=0.12.9 ENV DEST_DIR=/opt # Download Bowtie, unzip it and remove .zip file RUN curl -SLo ${DEST_DIR}/bowtie-${BOWTIE_RELEASE}.zip ${BOWTIE_URL}/${BOWTIE_RELEASE}/bowtie-${BOWTIE_RELEASE}-linux-x86_64.zip && unzip ${DEST_DIR}/bowtie-${BOWTIE_RELEASE}.zip -d ${DEST_DIR} && rm ${DEST_DIR}/bowtie-${BOWTIE_RELEASE}.zip
# Add bowtie path to the enviroment ENV PATH=${DEST_DIR}/bowtie-${BOWTIE_RELEASE}:$PATH CMD ["bowtie"]
